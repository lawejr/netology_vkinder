Бот для групп ВКонтакте
======================
Проект для курса [Netology](https://netology.ru/).

[ТЗ](https://github.com/netology-code/py-advanced-diplom/tree/new_diplom)

## Возможности
Бот умеет запрашивать и запоминать данные для поиска пользователей ВКонтакте. Поиск осуществляется только по пользователям с открытым профилем. 
На основе заданных фильтров бот формирует выдачу из нескольких профилей и отправляет в ответном сообщении. 
Есть возможность запросить другие результаты, либо изменить фильтры для поиска.

### Общение с ботом
* Чтобы начать разговор с ботом, пользователь должен написать сообщение "Start" или "Привет". На другое сообщение бот ответит подсказкой.
<p>
    <img src=".screenshots/1.png" alt="Подсказка" height="89" />
</p>

* После начала диалога всё взаимодействие с ботом может проходить по средствам клавиатуры ВКонтакте.
Если параметров для поиска недостаточно, бот самостоятельно уточнит их у пользователя, либо предложит начать поиск.
<p>
    <img src=".screenshots/2.png" alt="Клавиатура ВКонтакте" height="281" />
</p>

* Для завершения сеанса общения с ботом пользователь должен отправить сообщение "Stop" или "Пока".



## Настройки бота
1. Для поиска пользователей необходимо получить [токен Вконтакте](https://vk.com/dev/implicit_flow_user) с соответвующими правами на поиск.
2. Полученный токен необходимо разместить в переменной окружения `APP_TOKEN`. Реализована поддержка файла `.env`.
```sh
APP_TOKEN=app_token_value
```
3. Для добавления бота к сообществу нужно произвести настройки и создать ключ доступа. 
Инструкию можно посмотреть [здесь](https://github.com/netology-code/py-advanced-diplom/blob/new_diplom/group_settings.md).
4. Полученный ключ доступа необходимо разместить в переменной окружения `GROUP_TOKEN`.
```sh
GROUP_TOKEN=group_token_value
```
5. Установить все зависимости, согласно `requirements.txt`.

## Подключение к БД
Для подключении к базе данных в переменную окружения `DB_URL` необходимо передвать строку с адресом в следующем формате:
```sh
DB_URL=dialect+driver://username:password@host:port/database
```
Подробнее [здесь](https://docs.sqlalchemy.org/en/14/core/engines.html#supported-databases).

### Инициализация БД
Перед первым запуском бота необходимо инициализировать базу данных.
Для этого нужно единожды запустить скрипт `init_db.py`, предварительно настроив [подключение к БД](#подключение-к-БД).

## Запуск
Чтобы бот начал отвечать на сообщения, нужно запустить скрипт `main.py`, произведя настройки, описанные выше.

    